<section class="py-12 bg-white relative">
  <div class="max-w-8xl h-auto md:h-[550px] mx-auto px-4 relative">
    {% if section.settings.label %}
      <div class="mb-2 tracking-[0.22em] uppercase text-xs md:text-[16px] font-bold text-[#A68B61] text-center">
        {{ section.settings.label }}
      </div>
    {% endif %}

    {% if section.settings.heading %}
      <h2 class="text-3xl md:text-4xl lg:!text-[40px] font-extrabold text-black text-center mb-14" style="{% if section.settings.heading_shadow %}text-shadow:0 2px 16px #eee;{% endif %}">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div class="flex flex-col md:flex-row gap-[40px] relative">
      {% for block in section.blocks %}
        {% assign odd_step = forloop.index0 | modulo: 2 %}
          <div class="w-full h-fit flex flex-col items-center text-center flex-1 relative">

          <!-- Vertical connector (only md+) -->
          <div class="hidden md:block absolute top-[40%] left-1/2 w-[2px] h-[60px] bg-gray-700 -translate-x-1/2 z-0"></div>

          {% if odd_step == 0 %}
            <div class="mb-8">
              <h3 class="text-lg font-bold text-gray-900">{{ block.settings.title }}</h3>
              <p class="mt-2 text-gray-600">{{ block.settings.description }}</p>
              <span class="mt-4 inline-block text-green-700 font-bold text-2xl">0{{ forloop.index }}</span>
            </div>

            <!-- Horizontal line separator - improved -->
            <div class="w-full max-w-[200px] h-[1px] bg-gray-300 my-4 mx-auto"></div>
            <hr>
            {% if block.settings.icon != blank %}
              <div class="rounded-lg flex items-center justify-center">
                <img
                  height=""
                  width=""
                  src="{{ block.settings.icon | img_url: '300x300' }}"
                  alt="{{ block.settings.title }}"
                  class="w-40 h-40 object-contain">
              </div>
            {% endif %}
          {% else %}
            {% if block.settings.icon != blank %}
              <div class="rounded-lg flex items-center justify-center mb-8">
                <img
                  height=""
                  width=""
                  src="{{ block.settings.icon | img_url: '300x300' }}"
                  alt="{{ block.settings.title }}"
                  class="w-40 h-40 object-contain">
              </div>
            {% endif %}
            <hr>
            <!-- Horizontal line separator - improved -->
            <div class="w-full max-w-[200px] h-[1px] bg-gray-300 my-4 mx-auto"></div>

            <div>
              <span class="inline-block text-green-700 font-bold text-2xl">0{{ forloop.index }}</span>
              <h3 class="text-lg font-bold text-gray-900">{{ block.settings.title }}</h3>
              <p class="mt-2 text-gray-600">{{ block.settings.description }}</p>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
  {
    "name": "Vertical Zigzag Timeline",
    "settings": [
      {
        "type": "text",
        "id": "label",
        "label": "Top Label",
        "default": "OUR PARTNERS"
      }, {
        "type": "text",
        "id": "heading",
        "label": "Main Heading",
        "default": "Top Collaborators"
      }
    ],
    "blocks": [
      {
        "type": "step",
        "name": "Step",
        "settings": [
          {
            "type": "image_picker",
            "id": "icon",
            "label": "Step Icon"
          }, {
            "type": "text",
            "id": "title",
            "label": "Step Title",
            "default": "Step Title"
          }, {
            "type": "textarea",
            "id": "description",
            "label": "Step Description",
            "default": "Elit lacus vivamus sollicitudin sapien congue accusantium doloremque laudantium."
          }
        ]
      }
    ],
    "max_blocks": 6,
    "presets": [
      {
        "name": "Vertical Zigzag Timeline",
        "category": "Custom"
      }
    ]
  }
{% endschema %}