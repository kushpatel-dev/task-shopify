{% comment %} 
        Project Implementation Process Section 
        - Timeline: responsive (vertical on mobile, alternating/zig-zag on desktop) 
        - All steps are Liquid blocks with image picker, title, description, and number 
        - Fully styleable with Tailwind CSS, HTML structure matches your React reference 
{% endcomment %}

<section class="bg-gray-50 max-w-full overflow-hidden font-sans py-15 sm:py-28">
  <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">

    <!-- Section Header -->
    <div class="text-center">
      <h3 class="text-sm font-semibold tracking-[0.22em] uppercase" style="color: #a1887f;">
        {{ section.settings.top_label }}
      </h3>
      <h2 class="mt-4 text-4xl md:text-5xl font-bold text-black">
        {{ section.settings.heading }}
      </h2>
    </div>

    <!-- Timeline Container -->
    <div class="mt-24">

      <!-- Mobile: Vertical stack -->
      <div class="lg:hidden flex flex-col gap-12">
        {% for block in section.blocks %}
          <div class="flex flex-col items-center text-center gap-y-4 p-4 rounded-lg">
            <div class="w-32 h-32 flex items-center justify-center rounded-lg bg-stone-500">
              {% if block.settings.icon %}
                <img
                  height=""
                  width=""
                  src="{{ block.settings.icon | img_url: '120x120' }}"
                  alt="{{ block.settings.title | escape }}"
                  class="h-16 w-16"
                  loading="lazy">
              {% endif %}
            </div>
            <div class="text-6xl font-bold text-emerald-700">{{ block.settings.number }}</div>
            <h3 class="text-xl font-bold text-black">{{ block.settings.title }}</h3>
            <p class="text-gray-500">{{ block.settings.description }}</p>
          </div>
        {% endfor %}
      </div>

      <!-- Desktop: Zig-zag timeline -->
      <div class="hidden lg:block relative">
        <!-- Horizontal timeline bar -->
        <div class="absolute top-1/2 left-0 w-full h-0.5 bg-gray-300 transform -translate-y-1/2"></div>

        <div class="relative flex justify-between">
          {% for block in section.blocks %}
            {%- assign index = forloop.index0 -%}
            {%- assign is_top = index | modulo: 2 -%}
            <div class="group w-1/5 flex justify-center">
              <div class="flex items-center {% if is_top == 1 %}flex-col-reverse{% else %}flex-col{% endif %}">
                <!-- Text Content -->
                <div class="p-4 text-center {% if is_top == 1 %}mt-8{% else %}mb-8{% endif %}">
                  {% if is_top == 1 %}
                    <div class="h-[200px] w-[19vw] flex flex-col items-center justify-start relative">
                      <div class="relative w-0.5 min-h-13 bg-gray-300 md:top-[-2%]"></div>
                      <div class="md:relative top-[-15%]">
                        <p class="relative mt-4 text-2xl text-left font-bold text-emerald-800">{{ block.settings.number }}</p>
                        <h6 class="text-xl font-bold text-black w-[19vw] text-left">{{ block.settings.title }}</h6>
                        <p class="mt-2 text-gray-500 text-sm w-[15vw]">{{ block.settings.description }}</p>
                      </div>
                    </div>
                  {% else %}
                    <div class="h-[200px] w-[15vw] flex flex-col items-center justify-end relative">
                      <div class="md:relative md:bottom-[-15%]">
                        <h6 class="text-xl font-bold text-black w-[19vw] text-left">{{ block.settings.title }}</h6>
                        <p class="mt-2 text-gray-500 text-sm w-[15vw]">{{ block.settings.description }}</p>
                        <p class="mt-4 text-2xl text-left font-bold text-emerald-800">{{ block.settings.number }}</p>
                      </div>
                      <div class="relative w-0.5 min-h-13 bg-gray-300 mt-2 bottom-[-2%]"></div>
                    </div>
                  {% endif %}
                </div>
                <!-- Icon Box & Arrow -->
                <div class="relative flex-shrink-0">
                  <div class="relative w-36 {% if is_top != 1 %}top-[-18%]{% endif %} h-36 flex items-center justify-center rounded-lg bg-[#6d6d4d] group-hover:bg-[#015829] transition-colors duration-300">
                    {% if block.settings.icon %}
                      <img
                        height=""
                        width=""
                        src="{{ block.settings.icon | img_url: '120x120' }}"
                        alt="{{ block.settings.title | escape }}"
                        class="h-16 w-16"
                        loading="lazy">
                    {% endif %}
                  </div>
                  <!-- Arrow on hover -->
                  <div class="
                    absolute w-0 h-0 border-solid border-transparent 
                    left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity
                    {% if is_top == 1 %}
                      border-t-[15px] border-t-emerald-800 -bottom-3
                    {% else %}
                      border-b-[15px] border-b-emerald-800 top-[-40px]
                    {% endif %}
                    border-x-[15px]
                  ">
</div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

    </div>
  </div>
</section>

{% schema %}
  {
    "name": "Project",
    "settings": [
      {
        "type": "text",
        "id": "top_label",
        "label": "Top Label",
        "default": "OUR PROCESS"
      }, {
        "type": "text",
        "id": "heading",
        "label": "Main Heading",
        "default": "Project Implementation Process"
      }
    ],
    "blocks": [
      {
        "type": "process_step",
        "name": "Process Step",
        "settings": [
          {
            "type": "text",
            "id": "number",
            "label": "Step Number",
            "default": "01"
          }, {
            "type": "text",
            "id": "title",
            "label": "Step Title",
            "default": "Initial Consultation"
          }, {
            "type": "textarea",
            "id": "description",
            "label": "Description",
            "default": "Elit lacus vivamus sollicitudin sapien congue accusantium doloremque laudantium."
          }, {
            "type": "image_picker",
            "id": "icon",
            "label": "Icon"
          }
        ]
      }
    ],
    "max_blocks": 8,
    "presets": [
      {
        "name": "Project Timeline",
        "category": "Process"
      }
    ]
  }
{% endschema %}