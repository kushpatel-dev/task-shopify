{% schema %}
  {
    "name": "More Journeys to Explore",
    "settings": [
      {
        "type": "image_picker",
        "id": "background_pattern",
        "label": "Background Pattern (jali style)"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Main Heading",
        "default": "MORE JOURNEYS TO EXPLORE"
      },
      {
        "type": "color",
        "id": "heading_color",
        "label": "Heading Color",
        "default": "#FFFFFF"
      },
      {
        "type": "textarea",
        "id": "subheading",
        "label": "Subheading",
        "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit..."
      }, {
        "type": "color",
        "id": "subheading_color",
        "label": "Subheading Color",
        "default": "#FFFFFF"
      }, {
        "type": "color",
        "id": "card_title_color",
        "label": "Card Title Color",
        "default": "#FFFFFF"
      }
    ],
    "blocks": [
      {
        "type": "card",
        "name": "Journey Card",
        "settings": [
          {
            "type": "image_picker",
            "id": "card_image",
            "label": "Card Image"
          },
          {
            "type": "text",
            "id": "season_text",
            "label": "Season Text",
            "default": "SUMMER 2026"
          },
          {
            "type": "text",
            "id": "card_title",
            "label": "Card Title",
            "default": "1-1 COACHING"
          },
          {
            "type": "text",
            "id": "price",
            "label": "Price",
            "default": "$2,597.00"
          }, {
            "type": "url",
            "id": "register_link",
            "label": "Register Link"
          }
        ]
      }
    ],
    "max_blocks": 4,
    "presets": [
      {
        "name": "More Journeys Section",
        "category": "Custom Sections"
      }
    ]
  }
{% endschema %}

<section class="relative w-full">
  <!-- Background -->

  <div class="relative clip-top" style="
       position: relative; 
       z-index: 1000;
       background:
         linear-gradient(0deg, #572D2D, #572D2D),
         radial-gradient(30% 40.31% at 73.35% 53.89%, #492626 0%, rgba(73, 38, 38, 0) 100%);
     ">

    <div class="absolute inset-0">
      <!-- Pattern overlay -->
      {% if section.settings.background_pattern %}
        <div class="absolute inset-0">
          <img
            height=""
            width=""
            src="{{ section.settings.background_pattern | img_url: 'master' }}"
            alt="Pattern"
            class="w-full h-full object-cover mix-blend-multiply">
        </div>
      {% endif %}
    </div>

    <!-- Content -->
    <div class="relative max-w-full mx-auto px-4 py-20">
      <!-- Heading -->
      <h2 class="text-center uppercase" style="font-family: 'Futura PT Cond'; font-weight:700; font-size:54px; line-height:100%; color: {{ section.settings.heading_color }};">
        {{ section.settings.heading }}
      </h2>
      <p class="text-center mt-4 max-w-3xl mx-auto" style="font-family: 'Futura PT'; font-weight:400; font-size:16px; line-height:100%; color: {{ section.settings.subheading_color }};">
        {{ section.settings.subheading }}
      </p>

      <!-- Cards -->
      <div class="mt-12 flex flex-wrap justify-center gap-8">
        {% for block in section.blocks %}
          <article
            class="group w-[300px] lg:h-[500px] bg-white/5 rounded-xl overflow-hidden shadow-[0_8px_24px_rgba(0,0,0,0.25)] ring-1 ring-white/10 backdrop-blur-[1px] flex flex-col"
            {{ block.shopify_attributes }}
            aria-label="{{ block.settings.card_title | escape }}">

            <!-- IMAGE AREA -->
            <div class="relative h-[440px] overflow-hidden">
              {% if block.settings.card_image %}
                <img
                  height=""
                  width=""
                  src="{{ block.settings.card_image | image_url: width: 900 }}"
                  srcset="
              {{ block.settings.card_image | image_url: width: 600 }} 600w,
              {{ block.settings.card_image | image_url: width: 900 }} 900w,
              {{ block.settings.card_image | image_url: width: 1200 }} 1200w
            "
                  sizes="(min-width:1024px) 300px, 300px"
                  alt="{{ block.settings.card_title | escape }}"
                  class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-[1.04]"
                  loading="lazy">
              {% else %}
                <div class="w-full h-full bg-black/20 grid place-items-center text-white/70">
                  <span class="text-sm">No image</span>
                </div>
              {% endif %}

              <!-- Legibility gradient -->
              <div class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/65 via-black/20 to-transparent"></div>

              <!-- Season tag: centered -->
              {% if block.settings.season_text != blank %}

                <div class="absolute bottom-40 right-35 grid place-items-center">
                  <span class="px-2 py-1 !text-[18px] md:text-[22px] uppercase tracking-wide rounded border border-amber-50 text-white">
                    {{ block.settings.season_text }}
                  </span>
                </div>

              {% endif %}

              <!-- Card title -->
              {% if block.settings.card_title != blank %}
                <h3 class=" w-[270px] ctm-h3-p9" style="color: {{ section.settings.card_title_color }}; font-family:'Futura PT Cond','Futura PT',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;">
                  {{ block.settings.card_title | newline_to_br }}
                </h3>
              {% endif %}
            </div>

            <!-- CTA AREA -->
            {% if block.settings.register_link != blank %}
              <div class="relative p-4">
                <a
                  href="{{ block.settings.register_link }}"
                  class="w-full inline-flex items-center justify-center rounded-full font-semibold py-2.5 px-6 transition
                   bg-[#A6192E] text-white hover:bg-[#8B1427] focus:outline-none focus:ring-2 focus:ring-white/40"
                  style="font-family:'Futura PT',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;"
                  aria-label="{{ block.settings.price }} | Register">
                  {{ block.settings.price }} | Register
                </a>
              </div>
            {% endif %}
          </article>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<style>
  /* Clip path top */
  .clip-top {
    clip-path: polygon(0 40px, 100% 0, 100% 100%, 0% 100%);
  }
</style>